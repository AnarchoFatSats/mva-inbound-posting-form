<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard Shortcuts Test</title>
    <link rel="stylesheet" href="css/unified-dark-theme.css">
    <link rel="stylesheet" href="css/keyboard-shortcuts.css">
    <link rel="stylesheet" href="css/global-search.css">
    <link rel="stylesheet" href="css/notification-center.css">
    <link rel="stylesheet" href="css/data-export.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            padding: 40px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .test-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .shortcut-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .demo-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }
        .demo-card h4 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        .demo-card p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 10px;
        }
        .demo-card kbd {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 3px 8px;
            font-family: 'Fira Code', monospace;
            font-size: 13px;
            color: var(--text-primary);
        }
        .test-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }
        .test-table th,
        .test-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .test-table th {
            background: var(--bg-primary);
            font-weight: 600;
        }
        .test-table tr:hover {
            background: var(--bg-hover);
        }
        .test-form {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }
        .form-group {
            display: grid;
            gap: 8px;
        }
        .form-group label {
            font-weight: 500;
            color: var(--text-primary);
        }
        .form-input {
            padding: 10px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .test-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .test-btn:hover {
            background: var(--bg-hover);
            transform: translateY(-2px);
        }
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            transform: translateX(0);
            transition: transform 0.3s;
            z-index: 100;
            padding: 20px;
        }
        .sidebar.collapsed {
            transform: translateX(-250px);
        }
        .shortcut-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
        }
    </style>
</head>
<body>
    <!-- Mock Sidebar for testing -->
    <div class="sidebar">
        <h3>Sidebar</h3>
        <p>Press <kbd>Ctrl+B</kbd> to toggle</p>
    </div>

    <div class="test-container">
        <div class="test-header">
            <h1>Keyboard Shortcuts System Test</h1>
            <p class="text-secondary">Interactive demo of all keyboard shortcut features</p>
            <p style="margin-top: 10px;">Press <kbd>?</kbd> to see all available shortcuts</p>
        </div>

        <!-- Quick Reference -->
        <div class="test-section">
            <h2>Quick Shortcut Reference</h2>
            <div class="shortcut-demo">
                <div class="demo-card">
                    <h4><i class="fas fa-globe"></i> Global Shortcuts</h4>
                    <p><kbd>?</kbd> - Show keyboard shortcuts help</p>
                    <p><kbd>Ctrl+K</kbd> - Open global search</p>
                    <p><kbd>Ctrl+N</kbd> - Toggle notifications</p>
                    <p><kbd>Escape</kbd> - Close modal/overlay</p>
                </div>
                <div class="demo-card">
                    <h4><i class="fas fa-compass"></i> Navigation</h4>
                    <p><kbd>G</kbd> then <kbd>D</kbd> - Go to Dashboard</p>
                    <p><kbd>G</kbd> then <kbd>L</kbd> - Go to Leads</p>
                    <p><kbd>G</kbd> then <kbd>A</kbd> - Go to Analytics</p>
                    <p><kbd>G</kbd> then <kbd>S</kbd> - Go to Settings</p>
                </div>
                <div class="demo-card">
                    <h4><i class="fas fa-bolt"></i> Actions</h4>
                    <p><kbd>Ctrl+Alt+N</kbd> - Create new item</p>
                    <p><kbd>Ctrl+S</kbd> - Save form</p>
                    <p><kbd>Ctrl+E</kbd> - Export data</p>
                    <p><kbd>Ctrl+F</kbd> - Focus filter</p>
                </div>
                <div class="demo-card">
                    <h4><i class="fas fa-desktop"></i> UI Controls</h4>
                    <p><kbd>Ctrl+B</kbd> - Toggle sidebar</p>
                    <p><kbd>F11</kbd> - Toggle fullscreen</p>
                    <p><kbd>Ctrl+Shift+T</kbd> - Toggle theme</p>
                </div>
            </div>
        </div>

        <!-- Test Form -->
        <div class="test-section">
            <h2>Test Form</h2>
            <p>Try pressing <kbd>Ctrl+S</kbd> to save this form</p>
            <form class="test-form" id="test-form">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" class="form-input" placeholder="Enter name">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label>Filter (Press Ctrl+F to focus)</label>
                    <input type="search" class="form-input" placeholder="Search or filter...">
                </div>
                <div class="action-buttons">
                    <button type="button" class="test-btn" data-action="save">
                        <i class="fas fa-save"></i> Save
                    </button>
                    <button type="button" class="test-btn" data-action="new">
                        <i class="fas fa-plus"></i> New
                    </button>
                </div>
            </form>
        </div>

        <!-- Test Table -->
        <div class="test-section">
            <h2>Test Table Navigation</h2>
            <p>Click on the table and use <kbd>J</kbd>/<kbd>K</kbd> or <kbd>↓</kbd>/<kbd>↑</kbd> to navigate rows</p>
            <p>Press <kbd>Space</kbd> to select/deselect a row, <kbd>Ctrl+A</kbd> to select all</p>
            <table class="test-table">
                <thead>
                    <tr>
                        <th><input type="checkbox"></th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Status</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>001</td>
                        <td>John Doe</td>
                        <td>Active</td>
                        <td>2024-01-15</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>002</td>
                        <td>Jane Smith</td>
                        <td>Pending</td>
                        <td>2024-01-16</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>003</td>
                        <td>Bob Wilson</td>
                        <td>Active</td>
                        <td>2024-01-17</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>004</td>
                        <td>Alice Brown</td>
                        <td>Inactive</td>
                        <td>2024-01-18</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Shortcut Management -->
        <div class="test-section">
            <h2>Shortcut Management</h2>
            <p>Manage and customize your keyboard shortcuts</p>
            <div class="action-buttons">
                <button class="test-btn" onclick="keyboardShortcuts.showHelp()">
                    <i class="fas fa-keyboard"></i> Show All Shortcuts
                </button>
                <button class="test-btn" onclick="keyboardShortcuts.showCustomizeModal()">
                    <i class="fas fa-cog"></i> Customize Shortcuts
                </button>
                <button class="test-btn" onclick="toggleShortcuts()">
                    <i class="fas fa-power-off"></i> Toggle Shortcuts
                </button>
                <button class="test-btn" onclick="showShortcutStats()">
                    <i class="fas fa-chart-bar"></i> Usage Statistics
                </button>
            </div>
        </div>

        <!-- Integration Test -->
        <div class="test-section">
            <h2>Integration with Other Modules</h2>
            <p>Test shortcuts that integrate with other systems</p>
            <div class="action-buttons">
                <button class="test-btn" data-action="export">
                    <i class="fas fa-download"></i> Export Data
                </button>
                <button class="test-btn" onclick="testNotification()">
                    <i class="fas fa-bell"></i> Test Notification
                </button>
                <button class="test-btn" onclick="testSearch()">
                    <i class="fas fa-search"></i> Test Search
                </button>
            </div>
        </div>
    </div>

    <!-- Shortcut Status Indicator -->
    <div class="shortcut-status">
        <div class="status-indicator"></div>
        <span>Shortcuts Enabled</span>
    </div>

    <!-- Load all modules -->
    <script src="js/global-search.js"></script>
    <script src="js/notification-center.js"></script>
    <script src="js/data-export.js"></script>
    <script src="js/keyboard-shortcuts.js"></script>
    
    <script>
        // Test functions
        function toggleShortcuts() {
            keyboardShortcuts.toggle();
            const statusEl = document.querySelector('.shortcut-status');
            const indicatorEl = statusEl.querySelector('.status-indicator');
            const textEl = statusEl.querySelector('span');
            
            if (keyboardShortcuts.enabled) {
                indicatorEl.style.background = 'var(--success)';
                textEl.textContent = 'Shortcuts Enabled';
            } else {
                indicatorEl.style.background = 'var(--danger)';
                textEl.textContent = 'Shortcuts Disabled';
            }
        }

        function showShortcutStats() {
            const stats = keyboardShortcuts.getMostUsedShortcuts();
            let message = 'Most Used Shortcuts:\n\n';
            
            if (stats.length === 0) {
                message += 'No shortcuts used yet. Try using some!';
            } else {
                stats.forEach((stat, index) => {
                    if (stat.shortcut) {
                        message += `${index + 1}. ${stat.shortcut.description} - Used ${stat.count} times\n`;
                    }
                });
            }
            
            alert(message);
        }

        function testNotification() {
            notificationCenter.notify({
                type: 'info',
                title: 'Keyboard Shortcut Test',
                message: 'This notification was triggered by a button. Try Ctrl+N to toggle notifications!',
                actions: [{
                    id: 'learn',
                    label: 'Learn More',
                    handler: () => keyboardShortcuts.showHelp()
                }]
            });
        }

        function testSearch() {
            if (window.globalSearch) {
                globalSearch.open();
            } else {
                alert('Global search module not loaded');
            }
        }

        // Listen for shortcut actions
        document.addEventListener('shortcut-action', (e) => {
            const action = e.detail.action;
            console.log('Shortcut action triggered:', action);
            
            switch (action) {
                case 'save':
                    alert('Save action triggered! Form would be saved here.');
                    break;
                case 'new':
                    alert('New action triggered! New item form would open here.');
                    break;
                case 'delete':
                    alert('Delete action triggered! Selected items would be deleted here.');
                    break;
                case 'refresh':
                    alert('Refresh action triggered! Data would be refreshed here.');
                    break;
            }
        });

        // Add visual indicators to buttons
        setTimeout(() => {
            keyboardShortcuts.createShortcutIndicators();
        }, 100);

        // Focus table for testing
        document.querySelector('.test-table').addEventListener('click', function() {
            this.focus();
        });

        // Make table focusable
        document.querySelector('.test-table').setAttribute('tabindex', '0');

        // Show welcome message
        setTimeout(() => {
            notificationCenter.notify({
                type: 'success',
                title: 'Keyboard Shortcuts Ready',
                message: 'Press ? to see all available shortcuts',
                important: true
            });
        }, 1000);
    </script>
</body>
</html> 